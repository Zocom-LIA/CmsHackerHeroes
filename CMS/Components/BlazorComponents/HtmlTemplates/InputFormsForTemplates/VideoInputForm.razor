@using CMS.Components.BlazorComponents.HtmlTemplates
@using CMS.Data
@using CMS.Entities
@using Microsoft.AspNetCore.Components
@using Microsoft.EntityFrameworkCore
@using System.Threading.Tasks
@inject IGetCurrentUserService GetCurrentUserService
@inject IContentService ContentService
@namespace BlazorComponents.HtmlTemplates.InputFormsForTemplates
@inherits BaseVideoTemplate //gets the base parameters we have in every template/inputform

<h3>Single Video Input Form</h3>

<div>
    <EditForm Model="@this" OnValidSubmit="SaveToDatabase">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div>
            <label>Content Name</label>
            <InputText @bind-Value="ContentName" placeholder="Enter name for content" class="form-control" />

            <!-- Video URL Input -->
            <label>Video URL</label>
            <InputText @bind-Value="VideoUrl" placeholder="Enter Video URL" class="form-control" />

            <!-- Video Size Controls -->
            <label>Video Width (px or %):</label>
            <InputText @bind-Value="VideoWidth" placeholder="e.g., 100% or 500px" class="form-control" />

            <label>Video Height (px or %):</label>
            <InputText @bind-Value="VideoHeight" placeholder="e.g., auto or 300px" class="form-control" />

            <!-- Video Alignment Controls -->
            <label>Video Alignment:</label>
            <InputSelect @bind-Value="VideoAlignment" class="form-control">
                <option value="left">Left</option>
                <option value="center">Center</option>
                <option value="right">Right</option>
            </InputSelect>
        </div>

        <div style="margin-top: 10px;">
            <button type="button" @onclick="PreviewImage" class="btn btn-primary">Preview Video</button>
            @if (!MultiPageMode) // Show button only if not in multi-page mode
            {
                <button type="submit" class="btn btn-success">Save To Database</button>
            }
        </div>
    </EditForm>

    <!-- Success message -->
    @if (saveSuccessful)
    {
        <div class="alert alert-success" role="alert" style="margin-top: 20px;">
            Content saved successfully!
            <a href="/contents?webpageid=@WebPageId" class="alert-link">Click here to view all contents.</a>
        </div>
    }
</div>
