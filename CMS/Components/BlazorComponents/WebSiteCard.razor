@using CMS.Entities;
@rendermode InteractiveServer

<div class="card" style="width: 18rem;">
    @if (WebSite.ImageUrl != null)
    {
    <img src="@WebSite.ImageUrl" alt="" style="object-fit:contain;width: 100%;height: 50%;"/>

    }
    else
    {
    <img src="https://t3.ftcdn.net/jpg/02/48/42/64/360_F_248426448_NVKLywWqArG2ADUxDq6QprtIzsF82dMF.webp" alt=""
         style="object-fit:contain;width: 100%;height: 50%;"/>
    }
    <div class="card-body">
        <h5 class="card-title">@WebSite.Title</h5>
        <p class="card-text">@WebSite.Description</p> 
        <div class="creation-info">
            Skapad: @WebSite.CreationDate<br />
        </div>
            @if (WebSite.LastUpdated.HasValue)
            {
            <div class="creation-info">Uppdaterad: @WebSite.LastUpdated </div>
        }
        else
        {
            <div class="creation-info">&nbsp;</div>
        }
            <hr />
        <div>
            @if (WebSite.WebPages.Count > 0) {
             <a href="@($"visit?websiteid={WebSite.WebSiteId}")">Besök</a> <span>|</span>

             } 
         
           <a href="@($"websites/edit?websiteid={WebSite.WebSiteId}")">Redigera</a> |
            <a href="@($"websites/details?websiteid={WebSite.WebSiteId}")">Detaljer</a> 
            <br>
            <a href="@($"/webpages/create?websiteid={WebSite.WebSiteId}")">Lägg till websida</a> |
            @* <a href="@($"websites/delete?websiteid={WebSite.WebSiteId}")">Radera</a>  *@


            <Offcanvas @ref="deleteWebsiteOffcanvas" Title="Ta Bort Webbsida" Size="OffcanvasSize.Large">
                <BodyTemplate>
                    <CMS.Components.Pages.WebSitePages.Delete WebSiteId="@(WebSite.WebSiteId)"></CMS.Components.Pages.WebSitePages.Delete>
                </BodyTemplate>
            </Offcanvas>
            <Button Color="ButtonColor.Primary" @onclick="OnDeleteWebSiteShowOffcanvasClick">Ta bort</Button>
        </div>
    </div>
</div>

@code {
    [Parameter] public WebSite WebSite { get; set; }

    private Offcanvas deleteWebsiteOffcanvas = default!;
    private async Task OnDeleteWebSiteShowOffcanvasClick() => await deleteWebsiteOffcanvas.ShowAsync();
}